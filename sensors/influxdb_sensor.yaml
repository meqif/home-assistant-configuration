---
platform: influxdb
host: !secret influxdb_host
username: !secret influxdb_username
password: !secret influxdb_password
queries:
  - name: Last Bathroom Absolute Humidity
    value_template: '{{ value | round(2) }}'
    group_function: last
    where: '"entity_id" = ''bme280_bathroom_absolute_humidity'''
    measurement: '"g/m続"'
    unit_of_measurement: 'g/m続'
    field: value
    database: !secret influxdb_database
  - name: Historical Bathroom Absolute Humidity
    value_template: '{{ value | round(2) }}'
    group_function: mean
    where: '"entity_id" = ''bme280_bathroom_absolute_humidity'' AND time < now() - 1h AND time > now() - 2h'
    measurement: '"g/m続"'
    unit_of_measurement: 'g/m続'
    field: value
    database: !secret influxdb_database
  - name: Historical Max Bed Pressure
    value_template: '{{ value | round(2) }}'
    group_function: max
    where: '"entity_id" = ''bed_pressure'' AND time > now() - 24h'
    measurement: '"V"'
    unit_of_measurement: 'V'
    field: value
    database: !secret influxdb_database
  - name: Historical Min Bed Pressure
    value_template: '{{ value | round(2) }}'
    group_function: min
    where: '"entity_id" = ''bed_pressure'' AND time > now() - 24h'
    measurement: '"V"'
    unit_of_measurement: 'V'
    field: value
    database: !secret influxdb_database
